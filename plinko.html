<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>–ü–ª–∏–Ω–∫–æ –ñ–µ—Ä–µ–±—å—ë–≤–∫–∞</title>
  <meta name="description" content="üéØ –ù–∞–±–ª—é–¥–∞–π, –∫–∞–∫ —à–∞—Ä –ø–∞–¥–∞–µ—Ç —á–µ—Ä–µ–∑ –≥–≤–æ–∑–¥–∏–∫–∏ –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –ø–æ —á–µ—Å—Ç–Ω—ã–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è–º. –§–∏–∑–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!" />
  <meta name="robots" content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1">
  <link rel="canonical" href="https://randomhost.online/plinko.html">

  <!-- Open Graph -->
  <meta property="og:locale" content="ru_RU">
  <meta property="og:type" content="website">
  <meta property="og:title" content="–ü–ª–∏–Ω–∫–æ –ñ–µ—Ä–µ–±—å—ë–≤–∫–∞ ‚Äî —á–µ—Å—Ç–Ω–∞—è —Ñ–∏–∑–∏–∫–∞ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏">
  <meta property="og:description" content="–®–∞—Ä –ø–∞–¥–∞–µ—Ç —Å–∫–≤–æ–∑—å –≥–≤–æ–∑–¥–∏–∫–∏ –∏ –ø–æ–ø–∞–¥–∞–µ—Ç –∫ –ø–æ–±–µ–¥–∏—Ç–µ–ª—é. –ù–∞—Å—Ç–æ—è—â–∞—è —Ñ–∏–∑–∏–∫–∞, —á–µ—Å—Ç–Ω—ã–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏.">
  <meta property="og:url" content="https://randomhost.online/plinko.html">
  <meta property="og:site_name" content="–†–∞–Ω–¥–æ–º–∞–π–∑–µ—Ä-–∏–≥—Ä—ã">

  <!-- Icons -->
  <link rel="icon" href="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f3af.svg" type="image/svg+xml">
  <meta name="theme-color" content="#764ba2">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;800&display=swap" rel="stylesheet">
  
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body{
      display:flex; align-items:center; justify-content:center;
      min-height:100vh; padding:20px;
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      font-family:'Montserrat',system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;
    }
    .main-container{ display:flex; gap:40px; align-items:center; max-width:1200px; width:100%; }
    .game-container{ flex:1; text-align:center; perspective:1000px; }
    
    /* –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ - –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ –ö–æ–ª–µ—Å—É –§–æ—Ä—Ç—É–Ω—ã */
    .settings-panel{
      width: 450px;
      padding: 30px;
      border-radius: 20px;
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    .settings-title{ color:#fff; font-size:24px; margin-bottom:15px; text-shadow:2px 2px 4px rgba(0,0,0,0.3); }
    .equalize-btn{
      padding: 8px 18px;
      background: linear-gradient(135deg, rgba(102,126,234,0.8), rgba(118,75,162,0.8));
      color: #fff;
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 10px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 700;
      transition: all .3s ease;
      white-space: nowrap;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      letter-spacing: 0.5px;
    }
    .equalize-btn:hover{
      background: linear-gradient(135deg, rgba(118,75,162,1), rgba(102,126,234,1));
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.3);
      border-color: rgba(255,255,255,0.5);
    }
    .equalize-btn:active{
      transform: translateY(0px);
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    .names-list{ 
      display: flex; 
      flex-direction: column; 
      gap: 10px; 
      margin-bottom: 20px; 
      max-height: 500px;
      overflow-y: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
      padding-right: 5px;
    }
    .name-item{ 
      display: flex; 
      gap: 8px;
      align-items: center; 
    }
    .name-input{
      flex:1; padding:10px 15px; border:2px solid rgba(255,255,255,0.2);
      border-radius:10px; background:rgba(255,255,255,0.1); color:#fff; font-size:16px; transition:.3s;
    }
    .name-input:focus{ outline:none; border-color:rgba(255,255,255,0.5); background:rgba(255,255,255,0.2); }
    .name-input::placeholder{ color:rgba(255,255,255,0.5); }
    .remove-btn{
      padding:8px 13px; background:rgba(239,68,68,.7); color:#fff; border:none; border-radius:8px;
      cursor:pointer; font-size:18px; transition:.3s;
    }
    .remove-btn:hover{ background:rgba(239,68,68,.9); transform:scale(1.1); }
    .add-name-container{ display:flex; gap:10px; margin-top:15px; }
    .add-btn-small{
      padding:10px 15px; background:rgba(34,197,94,.7); color:#fff; border:none; border-radius:10px;
      cursor:pointer; font-size:20px; transition:.3s;
    }
    .add-btn-small:hover{ background:rgba(34,197,94,.9); transform:scale(1.1); }

    .headers-row {
      display: flex;
      align-items: center;
      gap: 0px;
      margin-bottom: 10px;
      padding: 0 5px;
    }
    .header-name {
      flex: 1;
      color: rgba(255,255,255,0.7);
      font-size: 14px;
      font-weight: 600;
      text-align: left;
    }
    .header-probability {
      color: rgba(255,255,255,0.7);
      font-size: 14px;
      font-weight: 600;
      text-align: center;
      width: 120px;
      flex-shrink: 0;
    }
    .header-remove {
      width: 44px;
    }
    .probability-display {
      color: #ffd43b;
      font-weight: 800;
      font-size: 16px;
      min-width: 55px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .probability-input {
      width: 55px;
      padding: 4px;
      background: rgba(255,255,255,0.1);
      color: #ffd43b;
      border: 2px solid rgba(255,212,59,0.3);
      border-radius: 5px;
      text-align: center;
      font-weight: 800;
      font-size: 14px;
      transition: .2s;
    }

    .probability-input:focus {
      outline: none;
      border-color: rgba(255,212,59,0.6);
      background: rgba(255,255,255,0.15);
    }

    .probability-input.error {
      border-color: rgba(239,68,68,0.8);
      background: rgba(239,68,68,0.2);
    }

    /* –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ */
    .probability-input.manual {
      background: rgba(255,244,204,0.25);
      border-color: #F59E0B;
      box-shadow: 0 0 0 3px rgba(245,158,11,.25);
    }
    .probability-controls {
      display: flex;
      gap: 5px;
      width: 120px;
      flex-shrink: 0;
    }
    .prob-btn {
      padding: 5px 10px;
      background: rgba(255,255,255,0.2);
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: .2s;
    }
    .prob-btn:hover {
      background: rgba(255,255,255,0.3);
      transform: scale(1.05);
    }
    .prob-btn:active {
      transform: scale(0.95);
    }

    /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */
    h1{
      color:#fff; font-size:48px; margin-bottom:30px; text-shadow:2px 2px 4px rgba(0,0,0,0.3);
      animation:glow 2s ease-in-out infinite alternate;
    }
    @keyframes glow{
      from{ text-shadow:2px 2px 4px rgba(0,0,0,0.3),0 0 10px rgba(255,255,255,.3); }
      to  { text-shadow:2px 2px 4px rgba(0,0,0,0.3),0 0 20px rgba(255,255,255,.5); }
    }

    /* –¢–æ–ø-–∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
    .top-buttons {
      position: fixed;
      top: 20px;
      left: 20px;
      display: flex;
      gap: 12px;
      z-index: 1000;
    }
    .top-btn {
      background: linear-gradient(135deg, rgba(102,126,234,0.95), rgba(118,75,162,0.95));
      color: #fff;
      text-decoration: none;
      padding: 10px 18px;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      transition: 0.25s;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    .top-btn:hover {
      background: linear-gradient(135deg, rgba(118,75,162,1), rgba(102,126,234,1));
      transform: translateY(-2px);
    }

    /* –ë—É—Ä–≥–µ—Ä-–º–µ–Ω—é –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
    .burger-menu {
      display: none;
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1002;
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, rgba(102,126,234,0.95), rgba(118,75,162,0.95));
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 4px 16px rgba(0,0,0,0.3);
      transition: 0.3s;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 5px;
      padding: 10px;
    }
    .burger-menu:active {
      transform: scale(0.95);
    }
    .burger-line {
      width: 24px;
      height: 3px;
      background: #fff;
      border-radius: 2px;
      transition: 0.3s;
    }
    .burger-menu.open .burger-line:nth-child(1) {
      transform: translateY(8px) rotate(45deg);
    }
    .burger-menu.open .burger-line:nth-child(2) {
      opacity: 0;
    }
    .burger-menu.open .burger-line:nth-child(3) {
      transform: translateY(-8px) rotate(-45deg);
    }

    /* –í—ã–¥–≤–∏–∂–Ω–æ–µ –º–µ–Ω—é */
    .slide-menu {
      display: none;
      position: fixed;
      top: 0;
      left: -100%;
      width: 280px;
      height: 100vh;
      background: linear-gradient(135deg, rgba(102,126,234,0.98), rgba(118,75,162,0.98));
      backdrop-filter: blur(20px);
      box-shadow: 4px 0 24px rgba(0,0,0,0.4);
      z-index: 1001;
      transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      padding: 80px 20px 20px;
      overflow-y: auto;
    }
    .slide-menu.open {
      left: 0;
    }
    .menu-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .menu-overlay.show {
      opacity: 1;
    }
    .slide-menu-item {
      display: block;
      padding: 16px 20px;
      margin-bottom: 8px;
      background: rgba(255,255,255,0.15);
      color: #fff;
      text-decoration: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      transition: 0.2s;
      border: 2px solid rgba(255,255,255,0.2);
    }
    .slide-menu-item:active {
      background: rgba(255,255,255,0.3);
      transform: scale(0.98);
    }
    .slide-menu-item.active {
      background: rgba(255,255,255,0.3);
      border-color: rgba(255,255,255,0.6);
    }

    /* –ü–ª–∏–Ω–∫–æ-–ø–æ–ª–µ */
    .plinko-container{ 
      position:relative; 
      width:min(92vw, 600px);
      height:min(70vh, 620px);
      margin:0 auto 20px; 
      border-radius:24px;
      background: rgba(0,0,0,0.15);
      box-shadow: 0 0 0 8px rgba(255,255,255,0.15),
                  0 0 0 12px rgba(255,255,255,0.08),
                  0 12px 40px rgba(0,0,0,0.35);
      overflow:hidden;
    }
    canvas#plinkoCanvas{ 
      width:100%; 
      height:100%; 
      display:block; 
      border-radius:24px;
    }

    /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
    .controls{ display:flex; gap:20px; justify-content:center; margin-top:30px; }
    button{
      padding:15px 30px; font-size:18px; font-weight:800; border:none; border-radius:50px;
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:#fff; cursor:pointer;
      box-shadow:0 4px 15px rgba(0,0,0,.2); transition:.3s; position:relative; overflow:hidden;
      z-index: 10; /* –î–æ–±–∞–≤–ª–µ–Ω z-index –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
    }
    button:before{
      content:''; position:absolute; top:50%; left:50%; width:0; height:0; border-radius:50%;
      background:rgba(255,255,255,.3); transform:translate(-50%,-50%); transition:width .6s,height .6s;
    }
    button:hover:before{ width:300px; height:300px; }
    button:hover{ transform:translateY(-2px); box-shadow:0 6px 20px rgba(0,0,0,.3); }
    button:active{ transform:translateY(0); }
    button:disabled{ opacity:.5; cursor:not-allowed; }

    /* –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ */
    .confetti {
      position: fixed; width: 10px; height: 10px;
      z-index: 0; pointer-events: none;
      animation: confetti-fall 3s ease-out forwards;
    }
    @keyframes confetti-fall{
      0%{ transform: translateY(0) rotate(300deg); opacity:1;}
      100%{ transform: translateY(100vh) rotate(720deg); opacity:0;}
    }

    /* –û–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è */
    .winner-announcement {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(135deg, rgba(102,126,234,0.95), rgba(118,75,162,0.95));
      padding: 40px 60px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      z-index: 1001;
      display: none;
    }
    .winner-announcement.show {
      display: block;
      animation: winnerAppear 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    @keyframes winnerAppear {
      0% {
        transform: translate(-50%, -50%) scale(0) rotate(-180deg);
        opacity: 0;
      }
      100% {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
        opacity: 1;
      }
    }
    .winner-announcement h2 {
      color: #fff;
      font-size: 36px;
      margin: 0;
      text-align: center;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    .celebration-emoji {
      position: fixed;
      font-size: 60px;
      z-index: 998;
      pointer-events: none;
      animation: emojiCelebrate 3s ease-out forwards;
    }
    .celebration-word {
      position: fixed;
      font-size: 40px;
      font-weight: 800;
      color: #fff;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
      z-index: 998;
      pointer-events: none;
      opacity: 0.7;
      animation: wordFloat 4s ease-out forwards;
    }
    @keyframes wordFloat {
      0% {
        transform: scale(0) translateY(0) rotate(-15deg);
        opacity: 0;
      }
      15% {
        transform: scale(1.2) translateY(-20px) rotate(5deg);
        opacity: 0.9;
      }
      50% {
        opacity: 0.8;
      }
      100% {
        transform: scale(0.8) translateY(-150px) rotate(15deg);
        opacity: 0;
      }
    }
    @keyframes emojiCelebrate {
      0% {
        transform: scale(0) rotate(0deg);
        opacity: 0;
      }
      20% {
        transform: scale(1.5) rotate(180deg);
        opacity: 1;
      }
      80% {
        opacity: 1;
      }
      100% {
        transform: scale(0.5) rotate(360deg);
        opacity: 0;
      }
    }

    /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
    @media (max-width: 900px) {
      body { 
        padding-top: clamp(76px, 12vh, 96px); 
        padding-left: 12px; 
        padding-right: 12px;
        padding-bottom: 20px;
      }
      
      .main-container {
        flex-direction: column;
        gap: 18px;
        max-width: 100%;
        align-items: stretch;
      }

      /* –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –º–µ–Ω—é –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
      .top-buttons {
        display: none;
      }

      /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
      .burger-menu {
        display: flex;
      }

      .slide-menu {
        display: block;
      }

      .menu-overlay {
        display: block;
      }

      .game-container { order: -1; }

      .plinko-container {
        width: min(92vw, 520px);
        height: min(58vh, 500px); /* –£–º–µ–Ω—å—à–µ–Ω–æ –¥–ª—è –ª—É—á—à–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ */
        margin: 8px auto 22px;
      }
      button:disabled,
      input:disabled {
        cursor: not-allowed !important;
        opacity: 0.5 !important;
      }

      .probability-input:disabled,
      .name-input:disabled {
        background: rgba(255,255,255,0.05) !important;
        color: rgba(255,255,255,0.5) !important;
        border-color: rgba(255,255,255,0.1) !important;
      }

      .remove-btn:disabled,
      .prob-btn:disabled {
        background: rgba(150,150,150,0.3) !important;
        transform: none !important;
      }

      .remove-btn:disabled:hover,
      .prob-btn:disabled:hover {
        transform: none !important;
        background: rgba(150,150,150,0.3) !important;
      }

      h1{
        color:#fff; font-size:48px; 
        margin-bottom:20px;
        text-shadow:2px 2px 4px rgba(0,0,0,0.3);
        animation:glow 2s ease-in-out infinite alternate;
      }

      .settings-panel {
        width: 100%;
        max-width: 680px;
        padding: 16px;
        border-radius: 16px;
      }

      .headers-row { padding: 0; }
      .header-name { font-size: 13px; }
      .header-probability { width: 120px; font-size: 13px; }
      .header-remove { width: 44px; }

      .names-list {
        max-height: 38vh;
        padding-right: 2px;
      }

      .name-item { gap: 8px; }
      .name-input { padding: 10px 12px; font-size: 15px; }

      /* –£–í–ï–õ–ò–ß–ï–ù–ù–´–ï –∫–Ω–æ–ø–∫–∏ - –∏ + –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏ */
      .probability-controls { 
        width: 130px;  /* –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 120px */
        gap: 6px; 
      }
      .probability-input { 
        width: 58px;   /* –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 56px */
        font-size: 14px; 
        padding: 8px 4px; 
      }
      .prob-btn { 
        padding: 10px 8px;  /* –£–º–µ–Ω—å—à–µ–Ω padding –¥–ª—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ */
        font-size: 16px;
        min-width: 34px;    /* –£–º–µ–Ω—å—à–µ–Ω–æ —Å 36px */
        font-weight: 700;
        flex-shrink: 0;
      }

      .remove-btn { 
        padding: 10px 12px; /* –£–º–µ–Ω—å—à–µ–Ω–æ —Å 10px 13px */
        font-size: 16px;
        flex-shrink: 0;
        min-width: 42px;
      }

      .add-name-container { gap: 8px; margin-top: 12px; }
      .add-btn-small { padding: 10px 14px; font-size: 18px; }

      .equalize-btn { padding: 8px 12px; font-size: 13px; }

      .controls {
        gap: 12px;
        flex-wrap: wrap;
        padding: 0 6px;
        margin-top: 20px;
        margin-bottom: 20px;
        position: relative;
        z-index: 10; /* –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ */
      }
      .controls button {
        flex: 1 1 100%;
        min-height: 56px; /* –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 48px */
        font-size: 18px; /* –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 16px */
        border-radius: 40px;
        padding: 16px 32px; /* –£–≤–µ–ª–∏—á–µ–Ω padding */
        touch-action: manipulation; /* –£–ª—É—á—à–∞–µ—Ç –æ—Ç–∫–ª–∏–∫ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
        -webkit-tap-highlight-color: rgba(255,255,255,0.3);
      }

      .winner-announcement {
        padding: 22px 28px;
        border-radius: 16px;
      }
      .winner-announcement h2 {
        font-size: clamp(20px, 5.8vw, 28px);
      }

      .celebration-word { font-size: clamp(18px, 5.4vw, 28px); }
      .celebration-emoji { font-size: clamp(36px, 10vw, 48px); }
    }

    @media (hover: none) {
      .top-btn:hover,
      .prob-btn:hover,
      .add-btn-small:hover,
      .remove-btn:hover,
      button:hover {
        transform: none !important;
        box-shadow: 0 4px 15px rgba(0,0,0,.2) !important;
      }
      button:before { display: none; }
      
      /* –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –ª—É—á—à–µ–≥–æ feedback */
      button:active {
        transform: scale(0.98) !important;
        box-shadow: 0 2px 10px rgba(0,0,0,.3) !important;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      * { animation: none !important; transition: none !important; }
    }
  </style>
</head>
<body>
  <div class="main-container">
    <!-- –î–µ—Å–∫—Ç–æ–ø–Ω–æ–µ –º–µ–Ω—é -->
    <div class="top-buttons">
      <a href="lottery-drum.html" class="top-btn">üé± –õ–æ—Ç–æ—Ç—Ä–æ–Ω</a>
      <a href="wheel-of-fortune.html" class="top-btn">üé° –ö–æ–ª–µ—Å–æ</a>
      <a href="crystal-ball.html" class="top-btn">üîÆ –®–∞—Ä</a>
      <a href="plinko.html" class="top-btn">üéØ –ü–ª–∏–Ω–∫–æ</a>
      <a href="racing.html" class="top-btn">üèÅ –ì–æ–Ω–∫–∏</a>
      <a href="trading.html" class="top-btn">üìà –¢—Ä–µ–π–¥–∏–Ω–≥</a>
    </div>

    <!-- –ë—É—Ä–≥–µ—Ä-–º–µ–Ω—é –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
    <div class="burger-menu" id="burgerMenu">
      <div class="burger-line"></div>
      <div class="burger-line"></div>
      <div class="burger-line"></div>
    </div>

    <!-- Overlay -->
    <div class="menu-overlay" id="menuOverlay"></div>

    <!-- –í—ã–¥–≤–∏–∂–Ω–æ–µ –º–µ–Ω—é -->
    <div class="slide-menu" id="slideMenu">
      <a href="lottery-drum.html" class="slide-menu-item">üé± –õ–æ—Ç–æ—Ç—Ä–æ–Ω</a>
      <a href="wheel-of-fortune.html" class="slide-menu-item">üé° –ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã</a>
      <a href="crystal-ball.html" class="slide-menu-item">üîÆ –•—Ä—É—Å—Ç–∞–ª—å–Ω—ã–π –®–∞—Ä</a>
      <a href="plinko.html" class="slide-menu-item active">üéØ –ü–ª–∏–Ω–∫–æ</a>
      <a href="racing.html" class="slide-menu-item">üèÅ –ì–æ–Ω–∫–∏</a>
      <a href="trading.html" class="slide-menu-item">üìà –¢—Ä–µ–π–¥–∏–Ω–≥</a>
    </div>

    <div class="settings-panel">
      <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
        <h2 style="color: #fff; font-size: 24px; margin: 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">–£—á–∞—Å—Ç–Ω–∏–∫–∏</h2>
        <button class="equalize-btn" id="equalizeBtn">‚öñÔ∏è –£—Ä–∞–≤–Ω—è—Ç—å</button>
      </div>
      <div class="headers-row">
        <div class="header-name">–ò–º—è</div>
        <div class="header-probability">üìä –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</div>
        <div class="header-remove"></div>
      </div>
      <div class="names-list" id="namesList"></div>
      <div class="add-name-container">
        <input type="text" class="name-input" id="newNameInput" placeholder="–ù–æ–≤—ã–π —É—á–∞—Å—Ç–Ω–∏–∫">
        <button class="add-btn-small" id="addNameBtn">‚ûï</button>
      </div>
    </div>

    <div class="game-container">
      <h1>üéØ –ü–õ–ò–ù–ö–û</h1>
      <div class="plinko-container">
        <canvas id="plinkoCanvas"></canvas>
      </div>
      <div class="controls">
        <button id="dropBtn">üé± –ó–∞–ø—É—Å—Ç–∏—Ç—å —à–∞—Ä</button>
      </div>
    </div>
  </div>

  <div class="winner-announcement" id="winnerAnnouncement">
    <h2 id="winnerText"></h2>
  </div>

<script>
// ===== –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ =====
function detectIsMobile() {
  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
    || window.innerWidth < 768;
}

var isMobile = detectIsMobile();

// –£—á–∏—Ç—ã–≤–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É "—É–º–µ–Ω—å—à–∏—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ"
var prefersReducedMotion = false;
if (window.matchMedia) {
  try {
    prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  } catch (e) {}
}

// ===== –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã =====
var colors = [
  '#ff6b6b','#ffd43b','#51cf66','#339af0','#da77f2','#66d9e8',
  '#fb923c','#ec4899','#8b5cf6','#14b8a6','#f97316','#06b6d4'
];

var names = [];

var NAMES_KEY  = 'shared_names_v1';
var PROB_KEY   = 'shared_probabilities_v2';
var LOCKED_KEY = 'shared_locked_v1';

var probabilities          = {};
var lockedParticipants     = {};
var hasCustomProbabilities = false;

// ===== DOM —ç–ª–µ–º–µ–Ω—Ç—ã =====
var namesList          = document.getElementById('namesList');
var addNameBtn         = document.getElementById('addNameBtn');
var newNameInput       = document.getElementById('newNameInput');
var equalizeBtn        = document.getElementById('equalizeBtn');
var dropBtn            = document.getElementById('dropBtn');
var winnerAnnouncement = document.getElementById('winnerAnnouncement');
var winnerText         = document.getElementById('winnerText');
var canvas             = document.getElementById('plinkoCanvas');
var ctx                = canvas.getContext('2d');

// ===== –ó–≤—É–∫ =====
var audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function playSound(f, d, v) {
  try {
    var o = audioCtx.createOscillator();
    var g = audioCtx.createGain();
    o.type = 'sine';
    o.frequency.value = f;
    g.gain.value = v || 0.1;
    o.connect(g);
    g.connect(audioCtx.destination);
    var t = audioCtx.currentTime;
    o.start(t);
    o.stop(t + (d || 0.1));
  } catch (e) {
    // –µ—Å–ª–∏ –±—Ä–∞—É–∑–µ—Ä —Ä—É–≥–∞–µ—Ç—Å—è ‚Äî –ø—Ä–æ—Å—Ç–æ –º–æ–ª—á–∏–º
  }
}

function playTickSound() { playSound(800, 0.04, 0.12); }
function playWinSound()  { playSound(1200, 0.3, 0.25); }

function playFanfare() {
  if (prefersReducedMotion) return;
  var notes = [523, 659, 784, 1046, 784, 1046, 1319, 1568];
  notes.forEach(function (f, i) {
    setTimeout(function () { playSound(f, 0.18, 0.15); }, i * 150);
  });
}

var DEFAULT_NAMES = ['–î–∏–º–∞', '–°–∞—à–∞', '–ù–∏–∫–∏—Ç–∞', '–ú–∞–∫—Å–∏–º', '–ö–∏—Ä–∏–ª–ª', '–°–µ–º—ë–Ω'];

// ===== –ó–∞–≥—Ä—É–∑–∫–∞ –∏–º—ë–Ω =====
try {
  var savedNames = JSON.parse(localStorage.getItem(NAMES_KEY) || '[]');
  if (Object.prototype.toString.call(savedNames) === '[object Array]' && savedNames.length > 0) {
    names = savedNames;
  } else {
    names = DEFAULT_NAMES;
    localStorage.setItem(NAMES_KEY, JSON.stringify(names));
  }
} catch (e) {
  names = DEFAULT_NAMES;
}

function saveNames() {
  try {
    localStorage.setItem(NAMES_KEY, JSON.stringify(names));
  } catch (e) {}
}

// ===== –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è–º–∏ =====
function initProbabilities() {
  try {
    var saved       = JSON.parse(localStorage.getItem(PROB_KEY)   || '{}');
    var savedLocked = JSON.parse(localStorage.getItem(LOCKED_KEY) || '{}');

    if (saved && saved.hasCustomProbabilities && saved.probabilities && Object.keys(saved.probabilities).length) {
      probabilities          = mergeObjects(saved.probabilities);
      lockedParticipants     = mergeObjects(savedLocked);
      hasCustomProbabilities = true;

      names.forEach(function (n) { if (!(n in probabilities)) probabilities[n] = 1 / names.length; });

      Object.keys(probabilities).forEach(function (n) {
        if (names.indexOf(n) === -1) delete probabilities[n];
      });

      Object.keys(lockedParticipants).forEach(function (n) {
        if (names.indexOf(n) === -1) delete lockedParticipants[n];
      });

      saveProbabilities();
    } else {
      setEqualProbabilities();
    }
  } catch (e) {
    setEqualProbabilities();
  }
}

function mergeObjects(src) {
  var out = {};
  for (var k in src) {
    if (Object.prototype.hasOwnProperty.call(src, k)) {
      out[k] = src[k];
    }
  }
  return out;
}

function setEqualProbabilities() {
  var p = 1 / (names.length || 1);
  probabilities = {};
  names.forEach(function (nm) { probabilities[nm] = p; });
  lockedParticipants     = {};
  hasCustomProbabilities = false;
  saveProbabilities();
}

function clampProbabilitiesMin(min) {
  if (typeof min !== 'number') min = 0.05; 
  names.forEach(function (nm) {
    if ((probabilities[nm] || 0) < min) probabilities[nm] = min;
  });
}

function normalizeProbabilities() {
  var vals = names.map(function (n) { return probabilities[n] || 0; });
  var uniq = [];
  vals.forEach(function (v) {
    var rounded = +v.toFixed(6);
    if (uniq.indexOf(rounded) === -1) uniq.push(rounded);
  });

  if (uniq.length === 1 && !hasCustomProbabilities) {
    var exact = 1 / (names.length || 1);
    names.forEach(function (nm) { probabilities[nm] = exact; });
    return;
  }

  clampProbabilitiesMin(0.001);

  var sum = names.reduce(function (s, nm) { return s + (probabilities[nm] || 0); }, 0);
  if (sum > 0 && Math.abs(sum - 1) > 1e-4) {
    var k = 1 / sum;
    names.forEach(function (nm) { probabilities[nm] = (probabilities[nm] || 0) * k; });
  }

  clampProbabilitiesMin(0.001);
}

function saveProbabilities() {
  try {
    var cleanP = {};
    names.forEach(function (nm) { cleanP[nm] = probabilities[nm] || 0; });

    var cleanLocked = {};
    names.forEach(function (nm) {
      if (lockedParticipants[nm]) cleanLocked[nm] = true;
    });

    localStorage.setItem(PROB_KEY, JSON.stringify({
      probabilities: cleanP,
      hasCustomProbabilities: hasCustomProbabilities
    }));
    localStorage.setItem(LOCKED_KEY, JSON.stringify(cleanLocked));
  } catch (e) {}
}

function getProbabilityPercent(name) {
  if (!hasCustomProbabilities && names.length) return (100 / names.length).toFixed(1);
  return (((probabilities[name] || 0) * 100).toFixed(1));
}

function adjustProbability(name, delta) {
  var cur         = parseFloat(getProbabilityPercent(name)) || 0;
  var maxPossible = 100 - (names.length - 1) * 5; 
  var next        = Math.max(5, Math.min(maxPossible, cur + delta)); 
  setProbabilityManually(name, next);
  createNameInputs();
}

function setUIEnabled(enabled) {
  // –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞
  dropBtn.disabled = !enabled;
  
  // –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞
  addNameBtn.disabled = !enabled || names.length >= 20;
  
  // –ü–æ–ª–µ –≤–≤–æ–¥–∞ –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞
  newNameInput.disabled = !enabled;
  
  // –ö–Ω–æ–ø–∫–∞ —É—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π
  equalizeBtn.disabled = !enabled;
  
  // –í—Å–µ –∏–Ω–ø—É—Ç—ã –∏–º–µ–Ω
  var nameInputs = namesList.querySelectorAll('.name-input');
  for (var i = 0; i < nameInputs.length; i++) {
    nameInputs[i].disabled = !enabled;
  }
  
  // –í—Å–µ –∫–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  var removeButtons = namesList.querySelectorAll('.remove-btn');
  for (var j = 0; j < removeButtons.length; j++) {
    removeButtons[j].disabled = !enabled;
  }
  
  // –í—Å–µ –∫–Ω–æ–ø–∫–∏ +/- –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π
  var probButtons = namesList.querySelectorAll('.prob-btn');
  for (var k = 0; k < probButtons.length; k++) {
    probButtons[k].disabled = !enabled;
  }
  
  // –í—Å–µ –∏–Ω–ø—É—Ç—ã –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π
  var probInputs = namesList.querySelectorAll('.probability-input');
  for (var m = 0; m < probInputs.length; m++) {
    probInputs[m].disabled = !enabled;
  }
  
  // –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è
  if (!enabled) {
    namesList.style.opacity = '0.6';
    namesList.style.pointerEvents = 'none';
    addNameBtn.style.opacity = '0.5';
    newNameInput.style.opacity = '0.6';
    equalizeBtn.style.opacity = '0.5';
  } else {
    namesList.style.opacity = '1';
    namesList.style.pointerEvents = 'auto';
    addNameBtn.style.opacity = names.length >= 20 ? '0.5' : '1';
    newNameInput.style.opacity = '1';
    equalizeBtn.style.opacity = '1';
  }
}

function setProbabilityManually(name, percentValue) {
  var num = parseFloat(percentValue);
  if (isNaN(num) || num < 5 || num > 95) return false; // –ò–∑–º–µ–Ω–µ–Ω–æ —Å 0.1 –Ω–∞ 5, —Å 99.9 –Ω–∞ 95

  hasCustomProbabilities = true;
  var newProb = num / 100;

  var otherLocked = names.filter(function (n) { return n !== name && lockedParticipants[n]; });
  var lockedTotal = otherLocked.reduce(function (s, n) { return s + (probabilities[n] || 0); }, 0);
  var minOthers   = (names.length - 1) * 0.05; // –ò–∑–º–µ–Ω–µ–Ω–æ —Å 0.001 –Ω–∞ 0.05 (5%)

  if (newProb + lockedTotal + minOthers > 1) {
    lockedParticipants = {};
    probabilities[name] = newProb;
    lockedParticipants[name] = true;

    var others = names.filter(function (n) { return n !== name; });
    var remain = 1 - newProb;
    var share  = remain / (others.length || 1);
    others.forEach(function (n) { probabilities[n] = share; });

    normalizeProbabilities();
    saveProbabilities();
    return true;
  }

  lockedParticipants[name] = true;

  var free   = names.filter(function (n) { return n !== name && !lockedParticipants[n]; });
  var locked = names.filter(function (n) { return n !== name && lockedParticipants[n]; });

  if (free.length) {
    probabilities[name] = newProb;
    var lockedSum = locked.reduce(function (s, n) { return s + (probabilities[n] || 0); }, 0) + newProb;
    var remain     = Math.max(0, 1 - lockedSum);

    var freeSum = free.reduce(function (s, n) { return s + (probabilities[n] || 0); }, 0);
    if (freeSum > 0) {
      var k = remain / freeSum;
      free.forEach(function (n) { probabilities[n] = (probabilities[n] || 0) * k; });
    } else {
      free.forEach(function (n) { probabilities[n] = remain / free.length; });
    }

    free.forEach(function (n) {
      if ((probabilities[n] || 0) < 0.05) probabilities[n] = 0.05; // –ò–∑–º–µ–Ω–µ–Ω–æ —Å 0.001 –Ω–∞ 0.05
    });
  } else {
    var others2 = names.filter(function (n) { return n !== name; })
      .sort(function (a, b) {
        return (probabilities[a] || 0) - (probabilities[b] || 0);
      });

    var victim = others2[0];
    delete lockedParticipants[victim];

    probabilities[name] = newProb;
    var stillLocked = names.filter(function (n) { return n !== name && lockedParticipants[n]; });
    var lockedSum2  = stillLocked.reduce(function (s, n) { return s + (probabilities[n] || 0); }, 0) + newProb;
    var remain2     = 1 - lockedSum2;

    probabilities[victim] = Math.max(0.05, remain2); // –ò–∑–º–µ–Ω–µ–Ω–æ —Å 0.001 –Ω–∞ 0.05
  }

  normalizeProbabilities();
  saveProbabilities();
  return true;
}

function equalizeProbabilities() {
  setEqualProbabilities();
  createNameInputs();
  buildBins();
  drawBoard();
}

// ===== UI —Å–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ =====
function createNameInputs() {
  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å, –∫–∞–∫–æ–π –∏–Ω–ø—É—Ç –±—ã–ª –≤ —Ñ–æ–∫—É—Å–µ
  var focusedIndex = -1;
  var focusedCursorPos = 0;
  var inputs = namesList.querySelectorAll('.name-input');
  for (var i = 0; i < inputs.length; i++) {
    if (inputs[i] === document.activeElement) {
      focusedIndex = i;
      focusedCursorPos = inputs[i].selectionStart;
      break;
    }
  }
  
  namesList.innerHTML = '';
  
  names.forEach(function (name, idx) {
    var row = document.createElement('div');
    row.className = 'name-item';
    
    var input = document.createElement('input');
    input.type = 'text';
    input.className = 'name-input';
    input.value = name;
    input.placeholder = '–í–≤–µ–¥–∏—Ç–µ –∏–º—è';
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤–∞–ª–∏–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω–ø—É—Ç–∞
    var lastValidValue = name;
    
    input.addEventListener('input', function () {
      var v = input.value.trim();
      
      if (v.length === 0) {
        input.value = lastValidValue;
        input.style.borderColor = '#ef4444';
        input.style.background  = 'rgba(239,68,68,0.1)';
        
        setTimeout(function() {
          if (input.value === lastValidValue) {
            input.style.borderColor = 'rgba(255,255,255,0.2)';
            input.style.background  = 'rgba(255,255,255,0.1)';
          }
        }, 300);
        return;
      }
      
      if (v.length > 15) {
        input.value = lastValidValue;
        input.style.borderColor = '#ef4444';
        input.style.background  = 'rgba(239,68,68,0.1)';
        
        setTimeout(function() {
          if (input.value === lastValidValue) {
            input.style.borderColor = 'rgba(255,255,255,0.2)';
            input.style.background  = 'rgba(255,255,255,0.1)';
          }
        }, 300);
        return;
      }
      
      var dup = names.some(function (n, i) { 
        return i !== idx && n.toLowerCase() === v.toLowerCase(); 
      });
      if (dup) {
        input.style.borderColor = '#ef4444';
        input.style.background  = 'rgba(239,68,68,0.1)';
        return;
      }

      lastValidValue = v;
      input.style.borderColor = 'rgba(255,255,255,0.2)';
      input.style.background  = 'rgba(255,255,255,0.1)';

      var oldName = names[idx];

      if (Object.prototype.hasOwnProperty.call(probabilities, oldName)) {
        probabilities[v] = probabilities[oldName];
        delete probabilities[oldName];
      }
      if (Object.prototype.hasOwnProperty.call(lockedParticipants, oldName)) {
        lockedParticipants[v] = true;
        delete lockedParticipants[oldName];
      }
      saveProbabilities();

      names[idx] = v;
      saveNames();
      buildBins();
      drawBoard();
    });

    input.addEventListener('blur', function() {
      var v = input.value.trim();
      if (!v) {
        input.value = names[idx];
        return;
      }
      
      var dup = names.some(function (n, i) { 
        return i !== idx && n.toLowerCase() === v.toLowerCase(); 
      });
      if (dup) {
        input.value = names[idx];
        input.style.borderColor = 'rgba(255,255,255,0.2)';
        input.style.background  = 'rgba(255,255,255,0.1)';
      }
    });
    
    var probControls = document.createElement('div');
    probControls.className = 'probability-controls';
    
    var decreaseBtn = document.createElement('button');
    decreaseBtn.className = 'prob-btn';
    decreaseBtn.textContent = '‚àí';
    decreaseBtn.onclick = function () {
      adjustProbability(name, -1);
      buildBins();
      drawBoard();
    };

    var probInput = document.createElement('input');
    probInput.type = 'text';
    probInput.inputMode = 'decimal';
    probInput.className = 'probability-input';
    probInput.value = getProbabilityPercent(name);
    if (lockedParticipants[name]) {
      probInput.classList.add('manual');
    }
    var lastValid = probInput.value;

    probInput.addEventListener('focus', function () {
      probInput.value = probInput.value.replace('%', '');
      lastValid = probInput.value;
    });

    probInput.addEventListener('input', function () {
      var val = probInput.value.replace('%', '').trim();
      var num = parseFloat(val);
      if (val === '' || (!isNaN(num) && num >= 5 && num <= 95)) { // –ò–∑–º–µ–Ω–µ–Ω–æ —Å 0.1 –Ω–∞ 5, —Å 99.9 –Ω–∞ 95
        probInput.classList.remove('error');
      } else {
        probInput.classList.add('error');
      }
    });

    probInput.addEventListener('blur', function () {
      var val = probInput.value.replace('%', '').trim();
      var num = parseFloat(val);

      if (val === '' || isNaN(num) || num < 5 || num > 95) { // –ò–∑–º–µ–Ω–µ–Ω–æ —Å 0.1 –Ω–∞ 5, —Å 99.9 –Ω–∞ 95
        probInput.value = lastValid;
        probInput.classList.remove('error');
        playSound(300, 0.1, 0.2);
      } else {
        if (setProbabilityManually(name, num)) {
          lastValid = getProbabilityPercent(name);
          createNameInputs();
          buildBins();
          drawBoard();
        } else {
          probInput.value = lastValid;
          probInput.classList.remove('error');
        }
      }
    });

    probInput.addEventListener('keypress', function (e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        probInput.blur();
      }
      if (e.key !== 'Enter' && !/[\d.]/.test(e.key)) {
        e.preventDefault();
      }
    });

    var increaseBtn = document.createElement('button');
    increaseBtn.className = 'prob-btn';
    increaseBtn.textContent = '+';
    increaseBtn.onclick = function () {
      adjustProbability(name, 1);
      buildBins();
      drawBoard();
    };
    
    probControls.appendChild(decreaseBtn);
    probControls.appendChild(probInput);
    probControls.appendChild(increaseBtn);
    
    var btn = document.createElement('button');
    btn.className = 'remove-btn';
    btn.textContent = '‚úï';
    btn.onclick = function () {
      if (names.length <= 2) {
        alert('–î–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∏–Ω–∏–º—É–º 2 —É—á–∞—Å—Ç–Ω–∏–∫–∞!');
        return;
      }
      var removedName = names[idx];
      names.splice(idx, 1);
      delete probabilities[removedName];
      delete lockedParticipants[removedName];

      saveNames();
      normalizeProbabilities();
      saveProbabilities();
      
      createNameInputs();
      buildBins();
      drawBoard();
    };
    
    row.appendChild(input);
    row.appendChild(probControls);
    row.appendChild(btn);
    namesList.appendChild(row);
  });
  
  // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–æ–∫—É—Å
  if (focusedIndex >= 0 && focusedIndex < names.length) {
    var newInputs = namesList.querySelectorAll('.name-input');
    if (newInputs[focusedIndex]) {
      setTimeout(function() {
        newInputs[focusedIndex].focus();
        newInputs[focusedIndex].setSelectionRange(focusedCursorPos, focusedCursorPos);
      }, 0);
    }
  }
if (names.length >= 20) {
  addNameBtn.disabled = true;
  addNameBtn.style.opacity = '0.5';
  addNameBtn.style.cursor = 'not-allowed';
  newNameInput.disabled = true;
  newNameInput.placeholder = '–î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç (20 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)';
} else {
  // –ö–Ω–æ–ø–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ UI –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∏ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç
  if (!animId) { // animId !== null –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ –∏–¥–µ—Ç —Ä–∞—É–Ω–¥
    addNameBtn.disabled = false;
    addNameBtn.style.opacity = '1';
    addNameBtn.style.cursor = 'pointer';
    newNameInput.disabled = false;
    newNameInput.placeholder = '–ù–æ–≤—ã–π —É—á–∞—Å—Ç–Ω–∏–∫';
  }
}
}

function addNewParticipant() {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  if (names.length >= 20) {
    alert('–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ - 20!');
    newNameInput.style.borderColor = '#ef4444';
    newNameInput.style.background  = 'rgba(239,68,68,0.1)';
    setTimeout(function () {
      newNameInput.style.borderColor = 'rgba(255,255,255,0.2)';
      newNameInput.style.background  = 'rgba(255,255,255,0.1)';
    }, 1500);
    return;
  }

  var v = newNameInput.value.trim();
  if (!v) return;
  
  var dup = names.some(function (n) { return n.toLowerCase() === v.toLowerCase(); });
  if (dup) {
    newNameInput.style.borderColor = '#ef4444';
    newNameInput.style.background  = 'rgba(239,68,68,0.1)';
    setTimeout(function () {
      newNameInput.style.borderColor = 'rgba(255,255,255,0.2)';
      newNameInput.style.background  = 'rgba(255,255,255,0.1)';
    }, 1500);
    return;
  }
  
  newNameInput.value = '';
  newNameInput.style.borderColor = 'rgba(255,255,255,0.2)';
  newNameInput.style.background  = 'rgba(255,255,255,0.1)';

  names.push(v);
  saveNames();

  probabilities[v] = 1 / names.length;
  normalizeProbabilities();
  saveProbabilities();

  createNameInputs();
  buildBins();
  drawBoard();
}

addNameBtn.addEventListener('click', addNewParticipant);
newNameInput.addEventListener('keypress', function (e) {
  if (e.key === 'Enter') addNewParticipant();
});
equalizeBtn.addEventListener('click', equalizeProbabilities);

// ===== –ü—Ä–∞–∑–¥–Ω–æ–≤–∞–Ω–∏—è =====
function createCelebrationEmojis() {
  if (prefersReducedMotion) return;

  var emojis = ['üéâ', 'üéä', 'üèÜ', '‚≠ê', '‚ú®', 'üéØ', 'üî•', 'üí´', 'üåü', 'üëè', 'üôå', 'üéà', 'üéÜ', 'üí•'];
  var count = isMobile ? 6 : 16;
  
  for (var i = 0; i < count; i++) {
    (function (i) {
      setTimeout(function () {
        var emoji = document.createElement('div');
        emoji.className = 'celebration-emoji';
        emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        emoji.style.left = (Math.random() * 100) + '%';
        emoji.style.top  = (Math.random() * 100) + '%';
        emoji.style.animationDelay = (Math.random() * 0.5) + 's';
        document.body.appendChild(emoji);
        setTimeout(function () { emoji.remove(); }, 3500);
      }, i * 100);
    })(i);
  }
}

function createCelebrationWords() {
  if (prefersReducedMotion) return;

  var words = [
    '–í–ê–£', '–ß–ï–ú–ü–ò–û–ù', '–ú–û–õ–û–î–ï–¶', '–ö–†–ê–°–ê–í–ê', '–õ–ï–ì–ï–ù–î–ê', '–í–ü–ï–†–Å–î', '–¢–û–ü–ß–ò–ö', '–ü–û–ë–ï–î–ê',
    '–û–ì–û–ù–¨', '–¢–´ –õ–£–ß–®–ò–ô', '–î–ê–í–ê–ô –ï–©–Å', '–ù–ï–í–ï–†–û–Ø–¢–ù–û', '–°–£–ü–ï–†',
    '–ö–†–ê–°–ê–í–ß–ò–ö', '–ú–ê–°–¢–ï–†', '–ì–ï–ù–ò–ô', '–ë–û–°–°',
    '–≠–ü–ò–ß–ù–û', '–ë–†–ê–í–û', '–ì–ì', '–†–ï–°–ü–ï–ö–¢', '–®–ò–ö–ê–†–ù–û', '–ö–†–£–¢–Ø–ö', '–ú–û–©–ù–û',
    '–ö–†–£–¢–û', '–§–ê–ô–ï–†', '–ë–û–ú–ë–ê', '–¢–û–ü-1', '–ü–†–û', '–ú–ê–ì–ò–Ø', '–ß–£–î–û', '–§–ê–ù–¢–ê–°–¢–ò–ö–ê',
    '–ü–û–ü–ê–õ –í –¢–û–ß–ö–£', '–§–ò–ó–ò–ö–ê –ü–û–°–õ–£–®–ù–ê', '–¢–†–ê–ï–ö–¢–û–†–ò–Ø –ò–î–ï–ê–õ–¨–ù–ê', '–ü–†–û–°–ß–ò–¢–ê–ù–û',
    '–ì–†–ê–í–ò–¢–ê–¶–ò–Ø –° –¢–û–ë–û–ô', '–í –Ø–ë–õ–û–ß–ö–û', '–®–ê–† –ü–û–í–ò–ù–£–ï–¢–°–Ø', '–¢–û–ß–ù–´–ô –ë–†–û–°–û–ö',
    'LUCKY SHOT', 'JACKPOT', '–ù–ï–†–ï–ê–õ–¨–ù–û–ï –ü–û–ü–ê–î–ê–ù–ò–ï', 'PLINKO –ú–ê–°–¢–ï–†'
  ];
  
  var gridCols = isMobile ? 3 : 6;
  var gridRows = isMobile ? 2 : 3;
  var positions = [];

  var marginPercent = 5;
  var usableWidth   = 100 - (2 * marginPercent);
  var usableHeight  = 100 - (2 * marginPercent);

  for (var row = 0; row < gridRows; row++) {
    for (var col = 0; col < gridCols; col++) {
      var denomX = (gridCols - 1) || 1;
      var denomY = (gridRows - 1) || 1;
      positions.push({
        left: marginPercent + (col * usableWidth / denomX),
        top:  marginPercent + (row * usableHeight / denomY)
      });
    }
  }

  positions.sort(function () { return Math.random() - 0.5; });
  
  var wordsToShow = isMobile ? 5 : 12;
  
  for (var i2 = 0; i2 < wordsToShow; i2++) {
    (function (i2) {
      setTimeout(function () {
        var word = document.createElement('div');
        word.className = 'celebration-word';
        word.textContent = words[Math.floor(Math.random() * words.length)];
        
        var pos = positions[i2 % positions.length];
        var randomOffsetX = (Math.random() - 0.5) * 8;
        var randomOffsetY = (Math.random() - 0.5) * 8;
        
        var finalLeft = Math.max(2, Math.min(98, pos.left + randomOffsetX));
        var finalTop  = Math.max(2, Math.min(98, pos.top  + randomOffsetY));
        
        word.style.left = finalLeft + '%';
        word.style.top  = finalTop  + '%';
        word.style.animationDelay = (Math.random() * 0.3) + 's';
        
        document.body.appendChild(word);
        setTimeout(function () { word.remove(); }, 4500);
      }, i2 * 120);
    })(i2);
  }
}

function createConfetti() {
  if (prefersReducedMotion) return;

  var cs = ['#ff6b6b','#ffd43b','#51cf66','#339af0','#da77f2','#66d9e8','#fb923c','#ec4899'];
  var count = isMobile ? 25 : 80;
  
  for (var i = 0; i < count; i++) {
    (function (i) {
      setTimeout(function () {
        var d = document.createElement('div');
        d.className = 'confetti';
        d.style.left   = (Math.random() * 100) + '%';
        d.style.top    = '0';
        d.style.background = cs[Math.floor(Math.random() * cs.length)];
        d.style.width  = (5 + Math.random() * 10) + 'px';
        d.style.height = (5 + Math.random() * 10) + 'px';
        d.style.animationDelay    = (Math.random() * 0.5) + 's';
        d.style.animationDuration = (2 + Math.random() * 2) + 's';
        document.body.appendChild(d);
        setTimeout(function () { d.remove(); }, 4000);
      }, i * 25);
    })(i);
  }
}

// ===== –ü–ª–∏–Ω–∫–æ: –≥–µ–æ–º–µ—Ç—Ä–∏—è =====
var DPR = Math.max(1, Math.min(3, window.devicePixelRatio || 1));
var W = 0, H = 0;

var rows = isMobile ? 6 : 12;
var pegs = [];
var bins = [];

function resize() {
  isMobile = detectIsMobile();

  var parent = canvas.parentElement;
  var cssW = parent.clientWidth;
  var cssH = parent.clientHeight;
  DPR = Math.max(1, Math.min(3, window.devicePixelRatio || 1));

  canvas.style.width  = cssW + 'px';
  canvas.style.height = cssH + 'px';
  canvas.width  = Math.round(cssW * DPR);
  canvas.height = Math.round(cssH * DPR);

  ctx.setTransform(1, 0, 0, 1, 0, 0);
  ctx.scale(DPR, DPR);

  W = cssW;
  H = cssH;
  
  if (isMobile && H < 450) {
    rows = 5;
  } else if (isMobile) {
    rows = 6;
  } else {
    rows = 12;
  }
  
  layoutPegs();
  buildBins();
  drawBoard();
}

function layoutPegs() {
  pegs = [];
  
  var topPad    = isMobile ? 30 : 40;
  var bottomPad = isMobile ? 100 : 80;
  var sidePad   = isMobile ? 15 : 25;
  
  var usableH = H - topPad - bottomPad;
  var rowGap  = usableH / rows;
  
  for (var r = 0; r < rows; r++) {
    var cols    = isMobile ? 8 : 16;
    var usableW = W - sidePad * 2;
    var step    = usableW / (cols - 1);
    var y       = topPad + r * rowGap;
    
    if (r % 2 === 0) {
      for (var c = 0; c < cols; c++) {
        var x = sidePad + step * c;
        pegs.push({ x: x, y: y });
      }
    } else {
      pegs.push({ x: sidePad - step * 0.5, y: y });
      
      for (var c2 = 0; c2 < cols - 1; c2++) {
        var x2 = sidePad + step * (c2 + 0.5);
        pegs.push({ x: x2, y: y });
      }
      
      pegs.push({ x: sidePad + usableW + step * 0.5, y: y });
    }
  }
}

function buildBins() {
  bins = [];
  
  var xStart = isMobile ? 12 : 20;
  var xEnd   = W - (isMobile ? 12 : 20);
  var span   = xEnd - xStart;
  
  var yHeight = isMobile ? 70 : 65;
  var y0 = H - yHeight - (isMobile ? 10 : 20);
  var y1 = H - (isMobile ? 10 : 20);
  
  var acc = 0;
  
  names.forEach(function (n, i) {
    var w  = Math.max(2, (probabilities[n] || 0) * span);
    var x0 = xStart + acc;
    var x1 = Math.min(xStart + span, x0 + w);
    acc += w;
    bins.push({
      name: n,
      x0: x0, x1: x1, y0: y0, y1: y1,
      color: colors[i % colors.length]
    });
  });
}

function drawBoard() {
  ctx.clearRect(0, 0, W, H);
  
  var gradient = ctx.createLinearGradient(0, 0, 0, H);
  gradient.addColorStop(0, 'rgba(102,126,234,0.08)');
  gradient.addColorStop(1, 'rgba(118,75,162,0.12)');
  ctx.fillStyle = gradient;
  ctx.fillRect(0, 0, W, H);
  
  var pegRadius = isMobile ? 3 : 3.5;
  
  ctx.shadowColor = 'rgba(0,0,0,0.3)';
  ctx.shadowBlur  = 4;
  ctx.fillStyle   = 'rgba(255,255,255,0.95)';
  pegs.forEach(function (p) {
    ctx.beginPath();
    ctx.arc(p.x, p.y, pegRadius, 0, Math.PI * 2);
    ctx.fill();
  });
  ctx.shadowBlur = 0;
  
  bins.forEach(function (b, idx) {
    var binGrad = ctx.createLinearGradient(b.x0, b.y0, b.x0, b.y1);
    binGrad.addColorStop(0, b.color + '40');
    binGrad.addColorStop(1, b.color + '60');
    ctx.fillStyle = binGrad;
    ctx.fillRect(b.x0, b.y0, b.x1 - b.x0, b.y1 - b.y0);
    
    if (idx < bins.length - 1) {
      ctx.strokeStyle = 'rgba(255,255,255,0.4)';
      ctx.lineWidth   = 2.5;
      ctx.beginPath();
      ctx.moveTo(b.x1, b.y0);
      ctx.lineTo(b.x1, b.y1);
      ctx.stroke();
    }
    
    var fontSize = isMobile ? 11 : 13;
    
    ctx.fillStyle = '#fff';
    ctx.font      = 'bold ' + fontSize + 'px Montserrat, sans-serif';
    ctx.textAlign = 'center';
    ctx.shadowColor = 'rgba(0,0,0,0.5)';
    ctx.shadowBlur  = 3;

    var text = b.name;
    ctx.fillText(text, (b.x0 + b.x1) / 2, b.y1 - (isMobile ? 8 : 10));
    ctx.shadowBlur = 0;
  });
}

// ===== –§–∏–∑–∏–∫–∞ =====
var animId       = null;
var ball         = null;
var winnerLocked = null;

// —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–ø–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
var GRAV      = isMobile ? 0.16  : 0.14;
var PEG_R     = isMobile ? 3     : 3.5;
var BALL_R    = isMobile ? 7     : 10;
var REST      = isMobile ? 0.6   : 0.58;
var WALL_REST = isMobile ? 0.5   : 0.48;
var FRICTION  = isMobile ? 0.998 : 0.9985;

function dropBall() {
  if (animId) return;
  winnerAnnouncement.classList.remove('show');
  winnerLocked = null;
  
  var centerX = W / 2;
  
  ball = {
    x: centerX,
    y: -BALL_R - (isMobile ? 60 : 80),
    vx: (Math.random() - 0.5) * (isMobile ? 1 : 0.8),
    vy: (isMobile ? 3 : 2.5) + Math.random() * 0.5
  };
  
  playTickSound();
  
  // –ë–ª–æ–∫–∏—Ä—É–µ–º UI –≤–æ –≤—Ä–µ–º—è —Ä–∞—É–Ω–¥–∞
  setUIEnabled(false);
  
  frame();
}

function collideWithPeg(p) {
  var dx = ball.x - p.x;
  var dy = ball.y - p.y;
  var dist = Math.sqrt(dx * dx + dy * dy);
  var minDist = PEG_R + BALL_R;
  
  if (dist < minDist) {
    var nx = dx / (dist || 1);
    var ny = dy / (dist || 1);
    var overlap = minDist - dist;
    
    ball.x += nx * overlap;
    ball.y += ny * overlap;
    
    var vDotN = ball.vx * nx + ball.vy * ny;
    var vnX   = vDotN * nx;
    var vnY   = vDotN * ny;
    var vtX   = ball.vx - vnX;
    var vtY   = ball.vy - vnY;
    
    ball.vx = vtX - vnX * REST;
    ball.vy = vtY - vnY * REST;
    ball.vx *= 0.99;
    ball.vy *= 0.99;
    
    playTickSound();
  }
}

function collideInsideBins() {
  if (!bins.length) return;
  
  var topY    = bins[0].y0;
  var bottomY = bins[0].y1;
  
  if (ball.y + BALL_R < topY) return;
  
  for (var i = 0; i < bins.length - 1; i++) {
    var sepX = bins[i].x1;
    if (ball.y - BALL_R < bottomY && Math.abs(ball.x - sepX) < BALL_R) {
      var sign = ball.x - sepX >= 0 ? 1 : -1;
      ball.x  = sepX + sign * BALL_R;
      ball.vx = -sign * Math.abs(ball.vx) * WALL_REST;
    }
  }
  
  var b = null;
  for (var j = 0; j < bins.length; j++) {
    if (ball.x >= bins[j].x0 && ball.x <= bins[j].x1) {
      b = bins[j];
      break;
    }
  }
  if (!b) return;
  
  var left  = b.x0 + BALL_R;
  var right = b.x1 - BALL_R;
  var floor = bottomY - BALL_R;
  
  if (ball.x < left) {
    ball.x  = left;
    ball.vx = Math.abs(ball.vx) * WALL_REST;
  }
  if (ball.x > right) {
    ball.x  = right;
    ball.vx = -Math.abs(ball.vx) * WALL_REST;
  }
  if (ball.y > floor) {
    if (!winnerLocked) {
      winnerLocked = b.name;
      revealWinner(b.name);
    }

    ball.y  = floor;
    ball.vy = -Math.abs(ball.vy) * WALL_REST;
  }
}

function physicsStep() {
  ball.vy += GRAV;
  ball.x  += ball.vx;
  ball.y  += ball.vy;
  ball.vx *= FRICTION;
  ball.vy *= FRICTION;
  
  var sideMargin = isMobile ? 12 : 20;
  
  if (ball.x < BALL_R + sideMargin) {
    ball.x  = BALL_R + sideMargin;
    ball.vx = Math.abs(ball.vx) * WALL_REST;
  }
  if (ball.x > W - BALL_R - sideMargin) {
    ball.x  = W - BALL_R - sideMargin;
    ball.vx = -Math.abs(ball.vx) * WALL_REST;
  }
  
  pegs.forEach(collideWithPeg);
  collideInsideBins();
  
  var topY = bins.length ? bins[0].y0 : (H - 85);
  if (ball.y > topY - BALL_R && Math.abs(ball.vx) < 0.02) {
    ball.vx += (Math.random() - 0.5) * 0.08;
  }
}

function isBallStopped() {
  var bottomY = bins.length ? bins[0].y1 : (H - 20);
  return (
    Math.abs(ball.vx) < 0.08 &&
    Math.abs(ball.vy) < 0.1 &&
    ball.y >= bottomY - BALL_R - 0.8
  );
}

function frame() {
  animId = requestAnimationFrame(frame);
  physicsStep();
  
  drawBoard();
  
  var ballGrad = ctx.createRadialGradient(
    ball.x - 3, ball.y - 3, 1,
    ball.x, ball.y, BALL_R
  );
  ballGrad.addColorStop(0,   '#ffffff');
  ballGrad.addColorStop(0.7, '#f0f0f0');
  ballGrad.addColorStop(1,   '#d0d0d0');
  
  ctx.shadowColor = 'rgba(0,0,0,0.4)';
  ctx.shadowBlur  = 8;
  ctx.fillStyle   = ballGrad;
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, BALL_R, 0, Math.PI * 2);
  ctx.fill();
  
  ctx.shadowBlur  = 0;
  ctx.strokeStyle = 'rgba(0,0,0,0.3)';
  ctx.lineWidth   = 2;
  ctx.stroke();
  
  if (isBallStopped()) {
    cancelAnimationFrame(animId);
    animId = null;
    finalizeWinner();
  }
}

function finalizeWinner() {
  if (winnerLocked) return;
  var x = ball.x;
  var winner = null;
  for (var i = 0; i < bins.length; i++) {
    if (x >= bins[i].x0 && x <= bins[i].x1) {
      winner = bins[i];
      break;
    }
  }
  if (!winner && bins.length) winner = bins[bins.length - 1];
  if (!winner && bins.length) winner = bins[0];
  if (!winner) return;
  revealWinner(winner.name);
}

function revealWinner(name) {
  playFanfare();
  createConfetti();
  createCelebrationEmojis();
  createCelebrationWords();
  
  winnerText.textContent = 'üéâ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: ' + name + ' üéâ';
  winnerAnnouncement.classList.add('show');
  
  setTimeout(function () {
    winnerAnnouncement.classList.remove('show');
    
    // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º UI –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞—É–Ω–¥–∞
    setUIEnabled(true);
  }, 3500);
}

dropBtn.addEventListener('click', dropBall);

// ===== resize-–æ–±—Ä–∞–±–æ—Ç–∫–∞ =====
var resizeTimeout;
window.addEventListener('resize', function () {
  clearTimeout(resizeTimeout);
  resizeTimeout = setTimeout(resize, 250);
});

// ===== –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ AudioContext –Ω–∞ –º–æ–±–∏–ª–µ =====
(function () {
  var unlocked = false;
  function unlock() {
    try {
      if (audioCtx && audioCtx.state === 'suspended') {
        audioCtx.resume();
      }
    } catch (e) {}
    if (!unlocked) {
      unlocked = true;
      window.removeEventListener('touchstart',  unlock, { passive: true });
      window.removeEventListener('pointerdown', unlock, { passive: true });
      window.removeEventListener('click',       unlock, { passive: true });
    }
  }
  window.addEventListener('touchstart',  unlock, { passive: true });
  window.addEventListener('pointerdown', unlock, { passive: true });
  window.addEventListener('click',       unlock, { passive: true });
})();

// ===== –ë—É—Ä–≥–µ—Ä-–º–µ–Ω—é =====
var burgerMenu  = document.getElementById('burgerMenu');
var slideMenu   = document.getElementById('slideMenu');
var menuOverlay = document.getElementById('menuOverlay');

if (burgerMenu && slideMenu && menuOverlay) {
  menuOverlay.classList.remove('show');

  burgerMenu.addEventListener('click', function () {
    burgerMenu.classList.toggle('open');
    slideMenu.classList.toggle('open');
    menuOverlay.classList.toggle('show');
  });

  menuOverlay.addEventListener('click', function () {
    burgerMenu.classList.remove('open');
    slideMenu.classList.remove('open');
    menuOverlay.classList.remove('show');
  });

  var menuItems = slideMenu.querySelectorAll('.slide-menu-item');
  for (var mi = 0; mi < menuItems.length; mi++) {
    menuItems[mi].addEventListener('click', function () {
      burgerMenu.classList.remove('open');
      slideMenu.classList.remove('open');
      menuOverlay.classList.remove('show');
    });
  }
}

// ===== –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è =====
function init() {
  initProbabilities();
  createNameInputs();
  resize();
}

init();
</script>



<!-- Schema.org structured data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "–ü–ª–∏–Ω–∫–æ –ñ–µ—Ä–µ–±—å—ë–≤–∫–∞",
  "applicationCategory": "GameApplication",
  "operatingSystem": "Web",
  "url": "https://randomhost.online/plinko.html",
  "description": "–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –æ–Ω–ª–∞–π–Ω-–∏–≥—Ä–∞ —Å —Ñ–∏–∑–∏–∫–æ–π –¥–ª—è —á–µ—Å—Ç–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è. –®–∞—Ä –ø–∞–¥–∞–µ—Ç —á–µ—Ä–µ–∑ –≥–≤–æ–∑–¥–∏–∫–∏ –∏ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —è—á–µ–π–∫—É —É—á–∞—Å—Ç–Ω–∏–∫–∞. –ù–∞—Å—Ç–æ—è—â–∞—è —Ñ–∏–∑–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è, –∫–∞—Å—Ç–æ–º–Ω—ã–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç–Ω—ã–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏.",
  "inLanguage": "ru",
  "browserRequirements": "Requires JavaScript, HTML5 Canvas support",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "RUB"
  },
  "featureList": [
    "–§–∏–∑–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏",
    "–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞",
    "–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤",
    "–ó–≤—É–∫–æ–≤–æ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ",
    "–ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–±–µ–¥—ã —Å –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏"
  ],
  "publisher": {
    "@type": "Organization",
    "name": "–†–∞–Ω–¥–æ–º–∞–π–∑–µ—Ä-–∏–≥—Ä—ã",
    "url": "https://randomhost.online"
  },
  "screenshot": "https://randomhost.online/plinko-screenshot.jpg",
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.8",
    "ratingCount": "156",
    "bestRating": "5"
  }
}
</script>

<!-- Yandex.Metrika counter --> 
<script type="text/javascript"> (function(m,e,t,r,i,k,a){ m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)}; m[i].l=1*new Date(); for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }} k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a) })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=104849796', 'ym'); ym(104849796, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true}); </script> 
<noscript><div><img src="https://mc.yandex.ru/watch/104849796" style="position:absolute; left:-9999px;" alt="" /></div></noscript> 
<!-- /Yandex.Metrika counter -->
</body>
</html>